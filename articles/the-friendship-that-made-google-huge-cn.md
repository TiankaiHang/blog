2000 年 3 月的一天，谷歌六位最优秀的工程师聚集在一间临时搭建的作战室里。公司正处于前所未有的紧急状态中。10 月，其核心系统（通过抓取网页来构建索引）停止了工作。虽然用户仍然可以在 google.com 上输入查询，但他们得到的结果已经过时了五个月。事态的严重性超出了工程师们的想象。谷歌的联合创始人 Larry Page 和 Sergey Brin 正在谈判一项为雅虎提供搜索引擎的交易，他们承诺提供的索引比当时大十倍——一个能够跟上万维网发展速度的索引，而万维网在前一年规模翻了一番。如果他们失败了，google.com 将停留在过去，与雅虎的交易可能会破裂，公司将面临资金耗尽的风险。

在一间靠近楼梯的会议室里，工程师们把门板放在锯木架上，架设好电脑。27 岁的 Craig Silverstein 身材瘦小，声音尖细，坐在靠墙的位置。Silverstein 是谷歌的第一位员工：他加入公司时，办公室还在 Brin 的客厅里，他亲自重写了公司的大部分代码。经过四天四夜的努力，他和一位名叫 Bogdan Cocosel 的罗马尼亚系统工程师仍然一无所获。“我们做的所有分析都没有意义，”Silverstein 回忆道。“一切都坏了，我们不知道为什么。”

Silverstein 几乎没有注意到他左肩后方 Sanjay Ghemawat 的存在，他是一位 33 岁的麻省理工学院毕业生，安静寡言，眉毛浓密，黑发两鬓斑白。Sanjay 几个月前，也就是 12 月才加入公司。他是跟随他的同事——一位名叫 Jeff Dean、身材修长、精力充沛的 31 岁工程师——从 Digital Equipment Corporation 来到谷歌的。Jeff 比 Sanjay 早十个月离开 D.E.C.。他们关系异常密切，喜欢一起编写代码。在作战室里，Jeff 把椅子滑到 Sanjay 的桌子旁，自己的桌子空着。Sanjay 操作键盘，而 Jeff 则斜靠在他旁边，像新闻主播耳边的制片人一样纠正和鼓励他。

Jeff 和 Sanjay 开始仔细检查停滞的索引。他们发现有些单词不见了——他们搜索“mailbox”却没有结果——而其他单词的排列顺序混乱。几天来，他们一直在代码中寻找缺陷，沉浸在代码的逻辑中。他们逐段检查，一切都没问题。他们找不到 bug。

程序员有时将他们的软件概念化为一个层次结构，从顶部的用户界面一直到越来越基础的层次。深入到这个结构的底部，即软件与硬件交汇的地方，就意味着从柏拉图式的代码秩序转向其所依赖的电力和硅的基本世界。在作战室的第五天，Jeff 和 Sanjay 开始怀疑他们要找的问题不是逻辑上的，而是物理上的。他们把混乱的索引文件转换成最原始的表示形式：二进制代码。他们想看看他们的机器看到了什么。

Sanjay 的显示器上出现了一列粗粗的 1 和 0，每一行代表一个索引词。Sanjay 指着：一个本应该是 0 的数字变成了 1。当 Jeff 和 Sanjay 把所有排序错误的单词放在一起时，他们发现了一个规律——每个单词都有同样的故障。他们的机器的内存芯片不知何故被损坏了。

Sanjay 看着 Jeff。几个月来，谷歌的硬件故障越来越多。问题在于，随着谷歌的成长，其计算基础设施也在扩大。计算机硬件很少会发生故障，直到你拥有足够多的硬件——然后它就一直发生故障。电线磨损，硬盘崩溃，主板过热。许多机器一开始就无法工作；有些机器的速度会莫名其妙地变慢。奇怪的环境因素也开始发挥作用。当超新星爆炸时，冲击波会产生向四面八方散射的高能粒子；科学家认为，有一个微小的概率，其中一个被称为宇宙射线的粒子会击中地球上的计算机芯片，将 0 翻转为 1。世界上最强大的计算机系统，比如 NASA、金融公司等，都使用特殊的硬件来容忍单个比特位的翻转。但是谷歌，当时仍然像一家初创公司一样运作，购买的是缺乏这种功能的更便宜的电脑。公司已经到了一个转折点。它的计算机集群已经变得如此庞大，以至于即使不太可能发生的硬件故障也变得不可避免。

Jeff 和 Sanjay 共同编写代码来弥补这些故障机器的问题。不久之后，新的索引完成了，作战室解散了。Silverstein 感到困惑。他是一个优秀的调试员；找到 bug 的关键是深入到底层。Jeff 和 Sanjay 走得更深。

在 3 月份的索引危机之前，谷歌的系统一直植根于其创始人在斯坦福大学研究生院编写的代码。Page 和 Brin 不是专业的软件工程师。他们是进行搜索技术实验的学者。当他们的网络爬虫崩溃时，没有提供信息的诊断信息——只有短语“Whoa, horsey!” 早期员工把 Page 和 Brin 写的一个软件 BigFiles 称为 BugFiles。他们最重要的索引代码需要几天才能完成，如果遇到问题，就必须从头开始重新启动。用硅谷的行话来说，谷歌是不可“扩展的”。

我们说我们“搜索网络”，但实际上我们并没有；我们的搜索引擎遍历的是网络的索引——一张地图。1996 年，当谷歌还被称为 BackRub 时，它的地图小到可以装在 Page 宿舍里的电脑上。2000 年 3 月，还没有一台超级计算机大到可以处理它。谷歌能跟上的唯一方法是购买消费类机器，并将它们连接成一个集群。因为这些计算机一半的成本都花在谷歌认为是垃圾的部件上——软盘驱动器、金属机箱——所以公司会订购原始主板和硬盘，然后把它们夹在一起。谷歌在加州圣克拉拉的一栋楼里有 1500 台这样的设备，它们堆成 6 英尺高的塔；由于硬件故障，只有 1200 台能工作。看似随机发生的故障不断破坏系统。为了生存，谷歌必须将其计算机联合成一个无缝、有弹性的整体。

Jeff 和 Sanjay 并肩负责这项工作。Wayne Rosing 曾在苹果公司从事 Macintosh 的前身工作，他于 2000 年 11 月加入谷歌，管理其百人工程团队。“他们是领导者，”他说。他们每周工作 90 个小时，编写代码，使单个硬盘驱动器发生故障时不会导致整个系统崩溃。他们在抓取过程中添加了检查点，以便可以在中途重新启动。通过开发新的编码和压缩方案，他们有效地使系统的容量翻了一番。他们是不知疲倦的优化者。当汽车转弯时，外侧车轮必须覆盖更多的地面；同样，旋转硬盘的外缘比内缘移动得更快。谷歌已经将最常访问的数据移到了外侧，这样比特就可以在读头下更快地流动，但内侧一半的空间是空的；Jeff 和 Sanjay 利用这个空间来存储常用搜索查询的预处理数据。2001 年，他们在四天内证明，谷歌的索引可以用快速的随机存取内存而不是相对较慢的硬盘来存储；这一发现重塑了公司的经济状况。Page 和 Brin 知道，用户会蜂拥而至一个能立即提供答案的服务。问题是，速度需要计算能力，而计算能力需要花钱。Jeff 和 Sanjay 用软件穿针引线，解决了这个问题。

2005 年 Rosing 离开后，Alan Eustace 成为工程团队的负责人。“矛盾的是，要大规模地解决问题，你必须了解最小的细节，”Eustace 说。Jeff 和 Sanjay 在比特级别理解计算机。Jeff 曾经传阅过一份“每个程序员都应该知道的延迟数字”列表。事实上，这份列表上的数字几乎没有程序员知道：L1 缓存引用通常需要半纳秒，或者从内存中顺序读取一兆字节需要 250 微秒。这些数字深深印刻在 Jeff 和 Sanjay 的脑海中。当他们帮助领导多次重写谷歌的核心软件时，系统的容量以数量级增长。与此同时，在公司庞大的数据中心里，技术人员现在按照软件生成的指示，沿着蜿蜒的路线行走，更换硬盘、电源和内存条。即使它的部件磨损和死亡，系统也能蓬勃发展。

如今，谷歌的工程师们存在于一个从 1 级开始的“存在巨链”中。最底层的是 IT 支持人员。2 级是刚从大学毕业的；3 级通常有硕士学位。达到 4 级需要几年时间，或者一个博士学位。大多数人的晋升在 5 级停止。6 级工程师——前 10%——能力如此之强，可以说他们是项目成功的原因；7 级是拥有长期记录的 6 级工程师。8 级的首席工程师与主要产品或基础设施的一部分相关联。9 级的杰出工程师则受到人们的崇敬。成为 10 级的谷歌 Fellow 是一种终身荣誉。谷歌 Fellow 通常是各自领域的世界领先专家。Jeff 和 Sanjay 是谷歌高级 Fellow——公司第一批也是唯一的 11 级工程师。

谷歌园区位于高速公路旁，距离山景城中心只有几分钟路程，是一系列低矮、不吸引人的建筑，窗户都装有彩色玻璃。去年夏天一个星期一，Jeff 和 Sanjay 在一起编程了一个上午后，去园区自助餐厅 Big Table 吃午饭，这家餐厅是以他们在 2005 年帮助开发的一个系统命名的，该系统将无数台计算机视为一个单一的数据库。身材高瘦的 Sanjay 穿着一件古老的栗色亨利衫、灰色裤子和一副小金属框眼镜。他看到外面有一张桌子，便快步走去，打开伞，坐在阴凉处。他把另一把椅子移到阳光下给 Jeff，Jeff 一分钟后到了，他穿着短袖衬衫，肩膀宽阔，脚蹬时髦的运动鞋。

像一对夫妻一样，Jeff 和 Sanjay 通过贡献整体画面的各个部分一起来讲故事。他们开始回忆起早期的项目。

“我们当时是手工写东西的，”Sanjay 说。他的眼镜在阳光下变暗了。“我们会重写它，然后就会想，‘哦，这看起来跟我们上个月写的东西差不多。’”

“或者我们的索引数据中稍微不同的一个过程，”Jeff 补充道。

“或者稍微不同，”Sanjay 说。“这就是我们弄清楚——”

“这就是本质，”Jeff 说。

“——这就是共同的模式，”Sanjay 说，完成了他们的想法。

Jeff 咬了一口他拿的披萨。他的手指像水手的手指一样，粗大而坚韧；相比之下，Sanjay 看起来几乎有些纤细，他想知道他们怎么会成为一对搭档。“我不太清楚我们是怎么决定这样会更好的，”他说。

“我们从谷歌成立之前就开始这样做了，”Jeff 说。

“但我不知道为什么我们决定在一台电脑前一起做比在两台电脑前分别做更好，”Sanjay 说。

“我会从我所在的 D.E.C. 研发实验室步行两个街区到他的 D.E.C. 研发实验室，”Jeff 说。“中间有一家冰淇淋店。”

“所以是因为冰淇淋店！”Sanjay 欣喜地说。

Sanjay 是单身，他经常和 Jeff、Jeff 的两个女儿以及他的妻子 Heidi 一起度假。Jeff 的女儿们称他为 Sanjay 叔叔，他们五人经常在周五共进晚餐。Sanjay 和 Jeff 的大女儿 Victoria 都喜欢烘焙。“我看着他的女儿们长大，”Sanjay 自豪地说。2004 年谷歌 IPO 后，他们搬进了相距四英里的房子。Sanjay 住在旧山景城一栋普通的的三居室房子里；Jeff 则亲自设计了他在帕洛阿尔托市中心附近的房子，在地下室安装了一个蹦床。在建造房子时，他发现虽然他喜欢设计空间，但他对所谓的“Sanjay 式”建筑方面没有耐心：梁、螺栓和负载的细节，这些细节可以防止宏伟的设计倒塌。

“我不知道为什么更多的人不这样做，”Sanjay 谈到与伙伴一起编程时说。

“你需要找到一个与你的思维方式兼容的人一起结对编程，这样你们两个在一起就能形成互补的力量，”Jeff 说。

他们从桌子旁起身，出发去寻找软冰淇淋，漫步穿过 Big Table 餐厅和在其中闲逛的谷歌员工。两人中，Jeff 更热衷于阐述，走路时他分享了他的软冰淇淋策略。“我来挤压。我认为向上推的方式增加了稳定性，”他说。Sanjay 愉快而专注地将巧克力和香草混合物旋转到他的蛋筒中。

社会学家 Michael P. Farrell 在 2001 年出版的《合作圈：友谊动力与创造性工作》一书中，对亲密的创意团体进行了研究——法国印象派画家、西格蒙德·弗洛伊德和他的同时代人。“奠定新视野基础的大多数脆弱的洞见，不是在整个团体在一起时出现的，也不是在成员单独工作时出现的，而是在他们成对合作并相互回应时出现的，”他写道。莫奈和雷诺阿在 1869 年夏天并肩工作，才发展出成为印象派的风格；在长达六年的合作催生立体主义的过程中，巴勃罗·毕加索和乔治·布拉克经常只在画布背面签名，以掩盖他们每个人完成了哪些画作。（“一幅画布直到我们俩都觉得它完成了才算完成，”毕加索后来回忆道。）在《二人之力：在创意组合中寻找创新的本质》一书中，作家 Joshua Wolf Shenk 引用了 1971 年的一次采访，约翰·列侬在采访中解释说，他和保罗·麦卡特尼中的任何一个人都会“写出好的部分，容易的部分，比如‘我今天看了新闻’之类的”。其中一个人会卡住，直到另一个人到来——然后，列侬说，“我会唱一半，他会受到启发写下一部分，反之亦然。”每个人都会陷入创作的瓶颈，但两个人很少同时陷入瓶颈。

在新的科学或艺术的“理论构建”阶段，重要的是广泛探索而不陷入死胡同。弗朗索瓦·雅各布与雅克·莫诺一起开创了基因调控的研究，他指出，到 20 世纪中叶，不断发展的分子生物学领域的大多数研究都是两人合作的成果。“两个人比一个人更善于构思理论和构建模型，”雅各布写道。“因为有两个头脑在思考一个问题，想法就会更快、更丰富地涌现。它们在伙伴之间来回碰撞。它们相互嫁接，就像树上的枝条一样。在这个过程中，幻想 sooner nipped in the bud。”在过去的 35 年里，大约一半的诺贝尔生理学或医学奖都颁给了科学合作伙伴。

经过多年的共同工作，搭档们有时会发展出一种私人语言，就像双胞胎一样。他们模仿对方的衣着和习惯。幽默感从一个人渗透到另一个人。在他们之间分配功劳变得不可能。但这种强度的合作关系在软件开发中并不常见。尽管开发人员有时会谈论“结对编程”——两个程序员共享一台计算机，一个“驾驶”，另一个“导航”——他们通常从冗余的角度来设想这种合作关系，就好像这对搭档是同一航班上的副驾驶一样。相比之下，Jeff 和 Sanjay 有时似乎是一个头脑的两半。他们的一些最著名的论文有多达十几位共同作者。尽管如此，他们的经理之一 Bill Coughran 回忆说，“他们作为一对搭档如此多产和高效，以至于我们经常围绕他们建立团队。”

1966 年，系统开发公司的研究人员发现，最好的程序员比最差的程序员效率高出十倍以上。从那时起，所谓的“10 倍程序员”的存在就一直备受争议。这种想法推崇个人，而软件项目往往是庞大而集体的。在编程中，很少有成就是孤立存在的。即便如此——或许也是讽刺的是——许多程序员认为 Jeff 和 Sanjay 共同完成的工作证明了 10 倍程序员的存在。

Jeff 于 1968 年 7 月出生在夏威夷。他的父亲 Andy 是一名热带病研究员；他的母亲 Virginia Lee 是一位医疗人类学家，会说六种语言。父子俩为了娱乐，一起组装了一台 IMSAI 8080 套件电脑。他们在机器上焊接升级部件，了解它的每一个部分。

Jeff 和他的父母经常搬家。13 岁时，他跳过了八年级的最后三个月，去索马里西部的一个难民营帮助他们。后来，在高中时，他开始为流行病学家编写一个名为 Epi Info 的数据收集程序；它成为了实地工作的标准工具，最终以十几种语言分发了数十万份。（美国疾病控制和预防中心维护的一个网站“Epi Info 的故事”中有一张 Jeff 高中毕业时的照片。）Jeff 在明尼苏达大学读书时认识了 Heidi，Heidi 多年后才知道这个项目的重要性。“他从不吹嘘这些事情，”她说。“你得从他嘴里套出来。”他们的第一次约会是在一场女子篮球比赛上；Jeff 穿着地鼠服装，在啦啦队助威。

Jeff 的博士学位专注于编译器，这种软件将人们编写的代码转换成针对计算机优化的机器语言指令。“就性感程度而言，编译器几乎是最无聊的了，”Alan Eustace 说；另一方面，它们让你“非常接近机器”。在描述 Jeff 时，Sanjay 用食指绕着太阳穴转。“当你写代码时，他脑子里有一个模型在运转，”他说。“‘这段代码的性能会怎样？’ 他会几乎半自动地考虑所有极端情况。”

Sanjay 直到 17 岁上康奈尔大学才接触到电脑。他 1966 年出生于印第安纳州西拉斐特，但在印度北部工业城市科塔长大。他的父亲 Mahipal 是一位植物学教授；他的母亲 Shanta 照顾 Sanjay 和他的两个哥哥姐姐。他们是一个书香门第：他的叔叔 Ashok Mehta 记得买了一本 Frederick Forsyth 写的《豺狼的日子》，书的装订已经破旧不堪，他看着 Ghemawat 家的孩子们一起读这本破书，读完一页就传给下一个人。Sanjay 的哥哥 Pankaj 成为哈佛商学院有史以来最年轻的终身教职 faculty member。（他现在是纽约大学斯特恩商学院的教授。）Pankaj 和 Sanjay 上同一所学校，以博学多才著称。“我有点生活在我哥哥的阴影下，”Sanjay 说。作为成年人，他仍然保持着谦逊的美德。2016 年，当他入选美国艺术与科学学院时，他没有告诉父母；是他们的邻居告诉他们的。

在麻省理工学院的研究生院，Sanjay 找到了一个关系密切的朋友圈。不过，他从来没有约会过，现在也“非常非常少”约会。他说，他没有决定不要家庭——事情就是这样发展的。他的密友们已经学会了不去打扰他，他的父母也早就接受了他们的儿子会成为单身汉的事实。也许是因为他如此低调，谷歌里他周围笼罩着一层神秘的气息。他以安静而深刻著称——一个思考深刻、思路异常清晰的人。在他的桌子上，他保留着一摞 Mead 的作文本，可以追溯到近 20 年前，里面写满了整齐的列表和图表。他用钢笔写字，而且是草书。他很少参考旧笔记本，但会通过写字来思考。在麻省理工学院，他的研究生导师是 Barbara Liskov，一位有影响力的计算机科学家，她的研究领域包括复杂代码库的管理。在她看来，最好的代码就像一篇好的文章。它需要一个精心实现的结构；每一个字都应该发挥作用。以这种方式编程需要对读者有同理心。这也意味着，代码不仅仅是达到目的的手段，而是一种 artifact 本身。“我认为他最擅长的是设计系统，”Craig Silverstein 说。“如果你只是看 Sanjay 写的一段代码，它就像一件比例匀称的雕塑一样美丽。”

在谷歌，Jeff 的名气要大得多。有关于 Jeff Dean 的网络迷因，模仿的是关于 Chuck Norris 的那些。（“Chuck Norris 数到了无穷大......两次”；“Jeff Dean 的简历列出了他没有做过的事情——这样更短。”）但是，对于了解他们两人的人来说，Sanjay 的才华不相上下。“Jeff 擅长提出疯狂的新想法和制作原型，”他们的老同事 Wilson Hsieh 说。“Sanjay 是那个把事情做持久的人。”在生活中，Jeff 更外向，Sanjay 更内向。在代码中，情况正好相反。Jeff 的编程令人眼花缭乱——他可以迅速勾勒出惊人的想法——但是，由于它做得很快，本着发现的精神，它可能会让读者掉队。Sanjay 的代码是社交性的。

“有些人，”Silverstein 说，“他们的代码太松散了。一个屏幕的代码上的信息非常少。你总是要来回滚动才能弄清楚发生了什么。”其他人写的代码太密集了：“你看着它，你会想，‘呃。我不想看这个。’ Sanjay 不知何故找到了中间地带。你看着他的代码，你会想，‘好吧，我能弄明白这个，’而且，你仍然可以在一页上看到很多东西。”Silverstein 继续说道，“每当我想在 Sanjay 的代码中添加新功能时，似乎钩子已经在那里了。我感觉自己像萨列里。我理解这种伟大。我不明白这是怎么做到的。”

今年春天的一个星期一早上，Jeff 和 Sanjay 站在 40 号楼的小厨房里，这里是谷歌大部分人工智能部门的所在地。在他们身后，一块白板上写满了矩阵代数；桌子上放着一篇关于无监督对抗网络的论文。Jeff 穿着褪色的 T 恤和牛仔裤，看起来像一个改过自新的海滩流浪汉；Sanjay 穿着毛衣和灰色裤子。明亮的窗户外面是一片高大的松树，再往外是一片田野。无论 Jeff 在谷歌的哪个地方工作，都会有浓缩咖啡机跟着他。在小厨房的柜台上，一台三英尺宽的 La Marzocco 咖啡机嗡嗡作响。“我们要迟到了，”Sanjay 在咖啡研磨机旁说。当时是八点三十二分。

喝完卡布奇诺后，他们走到自己的电脑前。Jeff 从自己凌乱的桌子旁滚了一把椅子到 Sanjay 一尘不染的桌子旁。他把一只脚放在文件柜上，向后靠着，而 Sanjay 则审视着他们面前的屏幕。有四个窗口开着：左边是一个网页浏览器和一个终端，用于运行分析工具；右边是文本编辑器 Emacs 中的两个文档，一个是待办事项列表和笔记本的组合，另一个充满了五颜六色的代码。Sanjay 的一个作文本放在电脑旁边。

“好了，我们在做什么？”Sanjay 问。

“我想我们正在看 TensorFlow Lite 的代码大小，”Jeff 说。

这是一个与机器学习相关的主要新软件项目，Jeff 和 Sanjay 担心它太臃肿了；就像图书编辑一样，他们在寻找可以删减的地方。为了完成这项任务，他们构建了一个新工具，而这个工具本身也需要优化。

“所以我试图弄清楚它有多慢，”Sanjay 说。

“它很慢，”Jeff 说。他向前倾了倾身子，但仍然很放松。

“所以那个是 120 千字节，”Sanjay 说，“花了大概 8 秒钟。”

“12 万个堆栈调用，”Jeff 说，“不是千字节。”

“嗯，千字节的文本，是的——差不多，”Sanjay 说。

“哦，是的，抱歉，”Jeff 说。

“我不太清楚我们应该选择多大的阈值作为单位大小，”Sanjay 说。“半兆？”

“看起来不错，”Jeff 说。Sanjay 开始打字，Jeff 被吸引到屏幕上。“所以你是说，如果比那个大，我们就采样……”他没说完剩下的；Sanjay 用代码回答了他。

当 Sanjay 开车时，他把手放在十点和两点钟的位置，专注地盯着前方。他在键盘前也是这样。他的双脚分开与肩同宽，看起来好像在练习姿势。他纤细的手指在键盘上轻轻移动。几个年轻的程序员开始 trickle 进来。

很快他们就达到了一个小里程碑，Sanjay 输入了一个命令来测试他们的进展。他似乎累了，在测试运行时查看电子邮件。测试结束了。他没有注意到。

“嘿，”Jeff 说。他打了个响指，指向屏幕。虽然在谈话中，他喜欢讲爸爸笑话和双关语，但当他与 Sanjay 一起坐在电脑前时，他会变得固执己见、粗鲁和挑剔。Sanjay 对此泰然处之。当他认为 Jeff 速度太快时，他会把手从键盘上抬起，张开手指，好像在说：“停下来。”（一般来说，Jeff 是油门，Sanjay 是刹车。）这就是他们最接近争吵的时候：在二十年的合作中，他们不记得曾经提高过嗓门。

Sanjay 滚动屏幕，将新的一段代码显示出来。“比如，所有这些都可以变成一个例程，不是吗？”Jeff 说。

“嗯，”Sanjay 同意。

Jeff 扳着手指关节。“看起来可行。我们应该这样做吗？”

Sanjay 很谨慎。“不，我——”

“所以我们要忽略一个问题？”Jeff 愤愤地说。

“不，我的意思是，我们只是想了解一下正在发生的事情的类型。所以我们可以做笔记，对吧？”

“好的，”Jeff 愉快地说，他的情绪瞬间转变。他们一起口述了一条笔记。

午餐时间快到了。他们工作了两个小时，只休息了十分钟，大部分时间都在交谈。（一个水平较低的程序员看着他们，最印象深刻的莫过于他们从未停下来或卡住。）让另一个程序员审查你的代码是标准的工程实践，但 Jeff 和 Sanjay 跳过了这一步，在他们的日志中草草地输入“lgtm”，意思是“在我看来不错”。从某种意义上说，他们一直忙于琐事。然而，他们的代码是在谷歌的规模上执行的。他们所担心的千比特和微秒在世界各地的数据中心被放大了十亿倍——这些数据中心是嘈杂、炎热、仓库大小的建筑，里面有无尽的处理器机架，由大桶水冷却。在这样的日子里，Jeff 经常回家告诉他的女儿们：“Sanjay 和我今天让谷歌搜索速度提高了 10%。”

Jeff 和 Sanjay 在 2003 年的四个月里为谷歌提供了可以说是其最大的单一升级。他们用一个名为 MapReduce 的软件做到了这一点。这个想法是在他们第三次重写谷歌的爬虫和索引器时产生的。他们意识到，每一次，他们都解决了一个重要的问题：在大量地理位置分散、各自不可靠的计算机中协调工作。将他们的解决方案推广开来，意味着他们可以避免一次又一次地重温这个问题。但这也将创造一个工具，使谷歌的任何程序员都可以使用其数据中心的机器，就好像它们是一台单一的、行星大小的计算机一样。

MapReduce 是 Jeff 和 Sanjay 在一个可以俯瞰鸭塘的角落办公室里写的，它为一个可能极其复杂的过程带来了秩序。在 MapReduce 之前，每个程序员都必须自己弄清楚如何划分和分配数据、分配工作以及应对硬件故障。MapReduce 为程序员提供了一种思考这些问题的结构化方式。就像厨师在将食材混合之前进行准备工作一样，MapReduce 也要求程序员将他们的任务分成两个阶段。首先，程序员告诉每台机器如何执行任务的“映射”阶段（例如，计算一个单词在网页上出现的次数）；接下来，她编写指令来“ reduce”所有机器的结果（例如，将它们相加）。MapReduce 处理分配的细节——通过这样做，它隐藏了这些细节。

第二年，Jeff 和 Sanjay 根据 MapReduce 任务重写了谷歌的抓取和索引系统。很快，当其他工程师意识到它的强大功能时，他们开始使用 MapReduce 来处理视频和渲染谷歌地图上的图块。MapReduce 非常简单，以至于新的任务不断涌现。谷歌有所谓的“昼夜使用曲线”——白天的流量比晚上多——MapReduce 任务开始吸收闲置的容量。做梦的大脑会处理白天的经历。现在，谷歌处理它自己的数据。

早期有一些迹象表明，谷歌是一家人工智能公司，假装是一家搜索公司。2001 年，与 Jeff 和 Sanjay 共用一个办公室的 Noam Shazeer 对谷歌从另一家公司授权的拼写检查器感到 frustrated：它不断犯令人尴尬的错误，比如告诉输入“TurboTax”的用户，他们可能指的是“turbot ax”。（大菱鲆是一种生活在北大西洋的比目鱼。）拼写检查器的好坏取决于它的词典，Shazeer 意识到，在网络上，谷歌可以访问有史以来最大的词典。他写了一个程序，利用网络文本的统计特性来确定哪些词可能是拼写错误。该软件了解到“pritany spears”和“brinsley spears”都指的是“Britney Spears”。当 Shazeer 在谷歌每周一次的 T.G.I.F. 聚会上演示这个程序时，员工们试图愚弄它，但大多失败了。在与 Jeff 和一位名叫 Georges Harik 的工程师的合作下，Shazeer 应用了类似的技术将广告与网页关联起来。广告定位成为一条金钱之河，公司将其导回自己的计算基础设施。这是一个反馈回路的开始——庞大将是谷歌智能的来源；智能是其财富的来源；财富是其增长的来源——这将使该公司异常地、令人不安地占据主导地位。

随着有进取心的程序员使用 MapReduce 从谷歌的数据中获取洞察力，转录用户的语音邮件、回答他们的问题、自动完成他们的查询以及在 100 多种语言之间进行翻译成为可能。这些系统是使用相对简单的机器学习算法开发的。尽管如此，“非常简单的技术，当你有大量数据时，效果非常好，”Jeff 说。随着“数据，数据，数据”——用 BigTable、MapReduce 及其 successors 存储和处理——成为公司的首要指令，谷歌的全球基础设施变得更加无缝和灵活。分布式计算的概念由来已久；“云计算”和“大数据”等概念早于谷歌的崛起。但是，通过让普通的程序员在智力上能够管理编写分布式程序，Jeff 和 Sanjay 让谷歌对这些技术有了新的掌握水平。用户可能已经感觉到有些事情发生了变化：谷歌的云变得越来越智能了。

2004 年，因为 Jeff 和 Sanjay 认为这对于天文学家、遗传学家和其他需要处理大量数据的科学家来说很有用，他们写了一篇论文《MapReduce: Simplified Data Processing on Large Clusters》（MapReduce：大型集群上的简化数据处理），并将其公开发表。MapReduce 论文的出现犹如机械降神。廉价的硬件和网络服务及连接设备的增长导致了数据的洪流，但很少有公司拥有处理这些信息的软件。两位工程师 Mike Cafarella 和 Doug Cutting 当时正在努力扩展一个名为 Nutch 的小型搜索引擎，他们对 MapReduce 的重要性深信不疑，决定从头开始构建该系统的免费克隆。他们最终将他们的项目命名为 Hadoop，这是 Cutting 的儿子心爱的填充大象的名字。随着 Hadoop 的成熟，它被财富 50 强中的一半公司采用。它成为了“大数据”的代名词。Facebook 使用“Hadoop MapReduce”（通常如此称呼）来存储和处理用户元数据——关于点击了什么、喜欢了什么以及查看了哪些广告的信息。一度，它拥有世界上最大的 Hadoop 集群。Hadoop MapReduce 帮助 LinkedIn 和 Netflix 实现了强大的功能。美国国家安全局前技术总监 Randy Garrett 回忆起向该机构的局长 Keith Alexander 将军演示这项技术的情景。Hadoop 执行分析任务的速度比以前的系统快了 1.8 万倍。它成为了一种新的情报收集方法的基础，一些观察家称之为“收集一切”。

Jeff 具有不安分的本性：一旦他能看到解决方案的雏形，问题对他来说就变得不那么有趣了。2011 年，随着世界拥抱云计算，他开始与斯坦福大学的计算机科学教授 Andrew Ng 合作，后者正在领导谷歌的一个秘密项目，对神经网络（由虚拟“神经元”组成的软件程序）进行研究。Jeff 在本科时期就接触过神经网络；那时候，它们还不能解决现实世界的问题。Ng 告诉 Jeff，这种情况正在改变。在斯坦福大学，当神经网络可以访问大量数据时，研究人员取得了一些令人兴奋的结果。Ng 认为，凭借谷歌的规模，神经网络不仅可以变得有用，而且可以变得强大。

神经网络与传统的计算机程序有着 profound 不同。它们的行为不是以通常的方式由程序员指定的；相反，它是使用输入和反馈“学习”的。Jeff 对神经网络的了解自本科时代以来并没有多大进步，Heidi 看到他们的浴室里堆满了教科书。Jeff 开始每周花大约一天的时间在这个名为“Google Brain”的项目上。谷歌的许多人对这项技术表示怀疑。“真是浪费人才，”他当时的经理 Alan Eustace 回忆起当时的想法。Sanjay 也无法理解 Jeff 的举动。“你做的是基础设施，”他心想。“你在那边干什么？”

在接下来的七年里，Google Brain 团队开发的神经网络在机器翻译、语音和图像识别方面都超越了当时的技术水平。最终，它们取代了谷歌用于搜索结果排名和广告定位的最重要算法，Google Brain 成为公司发展最快的团队之一。2001 年入职的工程师 Claire Cui 表示，Jeff 的参与标志着谷歌人工智能的一个转折点：“有人相信它，也有人不相信它。Jeff 证明了它是可行的。”

事实证明，人工智能依赖于规模，而 Jeff 这位系统工程师提供了这一点。作为这项工作的一部分，他领导开发了一个名为 TensorFlow 的程序——试图创造类似于人工智能领域的 MapReduce 的东西。TensorFlow 简化了将神经网络分布到大量计算机上的任务，将它们变成一个巨大的大脑。2015 年，TensorFlow 向公众发布时，它成为了人工智能的通用语言。最近，谷歌首席执行官 Sundar Pichai 宣布谷歌是一家“人工智能优先”的公司，并任命 Jeff 为其人工智能计划的负责人。

Jeff 现在每周有四天在管理 Google Brain。他指导着三千人的工作。他四处旅行演讲，每周召开一次会议来开发新的计算机芯片（Tensor 处理单元，专门为神经网络设计），并正在帮助开发 AutoML，一个使用神经网络来设计其他神经网络的系统。他每周只有一次时间与 Sanjay 一起编写代码。

工程壮举往往会自我抹去。我们记得 18 世纪的伟大探险家——James Cook、George Vancouver——但不记得约克郡的木匠 John Harrison，他经过几十年的努力，制造出了一台足够可靠的时钟，可以在海上计算经度。最近，Jeff 和 Sanjay 在他们常去的一家墨西哥餐厅 Palo Alto Sol 享用玛格丽塔酒和玉米饼时，Jeff 掏出了他的手机。“Gmail 是什么时候第一次推出的？”他问。手机回答说：“2004 年 4 月 1 日。”Sanjay 对社交场合很敏感，似乎不太喜欢在餐桌上分心，但 Jeff 却很高兴。谷歌现在可以使用一系列无缝集成且基本上不可见的程序，从他的手机延伸到世界各地的数据中心，进行交谈、聆听和回答问题。

如今，他们的角色发生了分歧。在谷歌，Sanjay 被称为“个人贡献者”——一个独自工作、不管理任何人的程序员。对此，他心存感激。“我不想做 Jeff 的工作，”他说。他目前正在开发一款软件，让工程师更容易组合和控制几十个程序——用于获取新闻、照片、价格——这些程序会在用户在谷歌搜索框中输入文本后立即开始运行。他每周都会与一群“Area Tech Leads”（谷歌的工程绝地委员会）开会，做出影响整个公司的技术决策。如果谷歌是一栋房子，Jeff 就会在扩建。Sanjay 则在加固结构，加固横梁，拧紧螺栓。

与此同时，在他们每周一的编码会议上，他们开始了一个新项目。这是一个 AI 项目：Jeff 说，他们试图训练一个“巨大的”机器学习模型来执行数千甚至数百万个不同的任务。Jeff 多年来一直在思考这个想法；最近，他决定这是可行的。他和 Sanjay 计划建立一个原型，让一个团队围绕它成长。在软件世界里，最好的领导方式就是用代码。

“我想他们很想念彼此，”Jeff 的妻子 Heidi 说。正是在他们的合作放缓时，他们开始有了周五的晚餐。

三月的一个星期天，Jeff 和 Sanjay 在库比蒂诺郊外见面徒步旅行。天气晴朗凉爽，但在阳光下很热。Jeff 开着一辆蓝色特斯拉 Roadster 抵达 trailhead，车上贴着 Bernie 2016 的保险杠贴纸。紧随其后的 Sanjay 也有自己的特斯拉，一辆红色的 Model S。Sanjay 一上午都在看书。Jeff 踢了足球。（绑在他小腿上的一个设备告诉他，他跑了 7.1 英里。）在构建了 3 月份的索引二十年后，Jeff 看起来像一个 retired 耐力运动员，他的皮肤被太阳晒得黝黑。Sanjay 似乎一点也没有变老。

这条小路是一个 6 英里的环形，要爬过茂密的森林。Jeff 带路。在树林里，他们 reminisced 谷歌的快速发展。Sanjay 回忆起，在公司第一次 spurt 增长期间，一名管道工在男卫生间的同一个隔间里安装了两个马桶。“我记得 Jeff 的评论，”他说。“‘两个脑袋比一个好！’”他笑了。

他们从树林里下来，进入干燥、 exposed 的乡村。一只 turkey vulture 从头顶飞过。

“这里的山比我想象的要陡，”Jeff 说。

“我以为有人说这是一条很平坦的徒步路线，”Sanjay 说。

“我想这就解释了为什么那边没有自行车道，”Jeff 说。

他们爬回了树林。在一个 switchback 上，Jeff 瞥见了树木之外的地方。“我们会在某个地方有一个很好的 lookout，”他说。

这条小径通向一个山顶，又高又宽，没有树木，视野开阔。地平线上有一层薄雾。尽管如此，他们仍然可以看到南边的圣克鲁斯山脉和东边的 Mission Peak。“Sanjay，那是你的办公室！”Jeff 说。他们站在一起，眺望山谷。♦
